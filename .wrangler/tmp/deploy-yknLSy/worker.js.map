{
  "version": 3,
  "sources": ["../../../src/worker.ts"],
  "sourceRoot": "/Users/kh/Documents/3.0 Antigravity/BuildPro/.wrangler/tmp/deploy-yknLSy",
  "sourcesContent": ["// @ts-nocheck removed\nimport { Router } from 'itty-router'; // Unused but kept for reference if needed\n\n// Define the environment interface\ninterface Env {\n    DB: D1Database;\n    ASSETS: Fetcher;\n}\n\n// Middleware to handle CORS\nconst corsHeaders = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Cache-Control': 'no-store, no-cache, must-revalidate, proxy-revalidate',\n    'Pragma': 'no-cache',\n    'Expires': '0'\n};\n\nconst withCors = (response: Response) => {\n    if (!response) {\n        // Fallback if null response\n        return new Response('Internal Router Error: No response', {\n            status: 500,\n            headers: corsHeaders\n        });\n    }\n\n    const newHeaders = new Headers(response.headers);\n    Object.entries(corsHeaders).forEach(([key, value]) => {\n        newHeaders.set(key, value);\n    });\n    return new Response(response.body, {\n        status: response.status,\n        statusText: response.statusText,\n        headers: newHeaders\n    });\n};\n\n// UUID Helper (Manual implementation to be safe)\nfunction generateUUID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\nexport default {\n    fetch: async (request: Request, env: Env, ctx: ExecutionContext) => {\n        // PARANOID GLOBAL TRY-CATCH\n        try {\n            // Handle CORS Preflight globally and immediately\n            if (request.method === 'OPTIONS') {\n                return new Response(null, {\n                    headers: corsHeaders\n                });\n            }\n\n            const url = new URL(request.url);\n\n            // API Request Handling\n            if (url.pathname.startsWith('/api/')) {\n                // GET /api/data\n                if (url.pathname === '/api/data' && request.method === 'GET') {\n                    const logs: string[] = [];\n                    logs.push('Start /api/data');\n\n                    try {\n                        const email = url.searchParams.get('email');\n                        logs.push(`Fetch user for email: ${email}`);\n\n                        if (!email) {\n                            return withCors(Response.json({ user: null }));\n                        }\n\n                        const user = await env.DB.prepare('SELECT * FROM users WHERE email = ?').bind(email).first();\n                        logs.push(`User found: ${!!user}`);\n\n                        if (!user) {\n                            return withCors(Response.json({ user: null }));\n                        }\n\n                        const orgId = user.organization_id;\n                        logs.push(`Org ID: ${orgId}`);\n\n                        logs.push('Fetching organization');\n                        const organization = await env.DB.prepare('SELECT * FROM organizations WHERE id = ?').bind(orgId).first();\n                        logs.push(`Organization found: ${!!organization}`);\n\n                        logs.push('Fetching projects');\n                        const { results: projects } = await env.DB.prepare('SELECT * FROM projects WHERE organization_id = ?').bind(orgId).all();\n                        logs.push(`Projects found: ${projects?.length}`);\n\n                        // Fetch tasks for all projects\n                        const projectIds = (projects || []).map((p: any) => p.id);\n                        let tasks: any[] = [];\n                        let projectUpdates: any[] = [];\n                        logs.push(`Project IDs: ${projectIds.join(',')}`);\n\n                        if (projectIds.length > 0) {\n                            const placeholders = projectIds.map(() => '?').join(',');\n                            logs.push(`Fetching tasks with placeholders: ${placeholders}`);\n                            const { results: taskResults } = await env.DB.prepare(`SELECT * FROM tasks WHERE project_id IN (${placeholders})`).bind(...projectIds).all();\n                            tasks = taskResults || [];\n\n                            logs.push(`Fetching project updates...`);\n                            const { results: updateResults } = await env.DB.prepare(`SELECT * FROM project_updates WHERE project_id IN (${placeholders})`).bind(...projectIds).all();\n                            projectUpdates = updateResults || [];\n                        }\n                        logs.push(`Tasks found: ${tasks.length}`);\n                        logs.push(`Project Updates found: ${projectUpdates.length}`);\n\n                        logs.push('Fetching other data');\n                        const { results: users } = await env.DB.prepare('SELECT * FROM users WHERE organization_id = ?').bind(orgId).all();\n                        const { results: meetings } = await env.DB.prepare('SELECT * FROM meetings WHERE organization_id = ?').bind(orgId).all();\n                        const { results: invoices } = await env.DB.prepare('SELECT * FROM invoices WHERE organization_id = ?').bind(orgId).all();\n                        const { results: notifications } = await env.DB.prepare('SELECT * FROM notifications WHERE organization_id = ?').bind(orgId).all();\n                        const { results: reminders } = await env.DB.prepare('SELECT * FROM reminders WHERE organization_id = ?').bind(orgId).all();\n                        const { results: otherMatters } = await env.DB.prepare('SELECT * FROM other_matters WHERE organization_id = ?').bind(orgId).all();\n                        logs.push('All data fetched');\n\n                        return withCors(Response.json({\n                            user,\n                            organization,\n                            users,\n                            projects,\n                            tasks,\n                            projectUpdates,\n                            meetings,\n                            invoices,\n                            notifications,\n                            reminders: reminders || [],\n                            otherMatters: otherMatters || []\n                        }));\n\n                    } catch (e: any) {\n                        return withCors(Response.json({\n                            message: `Worker Error in /api/data: ${e.message}`,\n                            logs: logs\n                        }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/signup\n                if (url.pathname === '/api/signup' && request.method === 'POST') {\n                    const logs: string[] = [];\n                    logs.push('Start /api/signup (Manual Handler)');\n                    console.log('[Worker] Start /api/signup (Manual Handler)');\n\n                    try {\n                        let data;\n                        try {\n                            data = await request.json();\n                            logs.push(`Payload received: ${JSON.stringify(data)}`);\n                            console.log(`[Worker] Payload received: ${JSON.stringify(data)}`);\n                        } catch (jsonErr: any) {\n                            logs.push(`JSON Parse Error: ${jsonErr.message}`);\n                            console.error(`[Worker] JSON Parse Error: ${jsonErr.message}`);\n                            throw new Error(`Invalid JSON body: ${jsonErr.message}`);\n                        }\n\n                        const { name, email, password, company, role, phone } = data;\n\n                        const orgId = generateUUID();\n                        const userId = generateUUID();\n                        logs.push(`Generated IDs: Org=${orgId}, User=${userId}`);\n                        console.log(`[Worker] Generated IDs: Org=${orgId}, User=${userId}`);\n\n                        // Create Organization\n                        logs.push(`Inserting Org: ${company}`);\n                        console.log(`[Worker] Inserting Org: ${company} (ID: ${orgId})`);\n                        try {\n                            const orgResult = await env.DB.prepare(\n                                'INSERT INTO organizations (id, name) VALUES (?, ?)'\n                            ).bind(orgId, company || null).run();\n                            console.log(`[Worker] Org Insert Result: ${JSON.stringify(orgResult)}`);\n                        } catch (dbErr: any) {\n                            console.error(`[Worker] DB Org Insert Error: ${dbErr.message}`);\n                            logs.push(`DB Org Insert Error: ${dbErr.message}`);\n                            throw dbErr;\n                        }\n\n                        logs.push('Org Inserted');\n                        console.log('[Worker] Org Inserted');\n\n                        // Create User\n                        logs.push(`Inserting User: ${email}, Role: ${role}`);\n                        console.log(`[Worker] Inserting User: ${email} (ID: ${userId})`);\n                        try {\n                            const userResult = await env.DB.prepare(\n                                'INSERT INTO users (id, organization_id, name, email, role, company, is_admin) VALUES (?, ?, ?, ?, ?, ?, ?)'\n                            ).bind(userId, orgId, name || null, email || null, role || null, company || null, 1).run();\n                            console.log(`[Worker] User Insert Result: ${JSON.stringify(userResult)}`);\n                        } catch (dbErr: any) {\n                            console.error(`[Worker] DB User Insert Error: ${dbErr.message}`);\n                            logs.push(`DB User Insert Error: ${dbErr.message}`);\n                            throw dbErr;\n                        }\n\n                        logs.push('User Inserted');\n                        console.log('[Worker] User Inserted');\n\n                        return withCors(Response.json({ success: true, userId, orgId, logs }));\n\n                    } catch (e: any) {\n                        console.error(`[Worker] Signup Fatal Error: ${e.message}`, e.stack);\n                        return withCors(Response.json({\n                            message: `Signup Error: ${e.message}`,\n                            stack: e.stack,\n                            logs: logs\n                        }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/project\n                if (url.pathname === '/api/project' && request.method === 'POST') {\n                    try {\n                        const project = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO projects (id, organization_id, name, address, client_name, client_email, client_phone, start_date, end_date, color, status, progress)\n                            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            project.id, project.organizationId, project.name, project.address || null, project.clientName || null,\n                            project.clientEmail || null, project.clientPhone || null, project.startDate || null, project.endDate || null, project.color || null,\n                            project.status || 'active', project.progress || 0\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Project Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/task\n                if (url.pathname === '/api/task' && request.method === 'POST') {\n                    try {\n                        const task = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO tasks (id, project_id, title, description, status, required_date, assigned_to)\n                            VALUES (?, ?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            task.id, task.projectId, task.title, task.description || null, task.status || 'pending', task.requiredDate || null, task.assignedTo || null\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Task Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/project/update\n                if (url.pathname === '/api/project/update' && request.method === 'POST') {\n                    try {\n                        const project = await request.json();\n                        // Only update fields that are typically editable\n                        await env.DB.prepare(`\n                            UPDATE projects \n                            SET name = ?, address = ?, status = ?, progress = ?, start_date = ?, end_date = ?\n                            WHERE id = ?\n                        `).bind(\n                            project.name, project.address || null, project.status || 'active', project.progress || 0, project.startDate || null, project.endDate || null, project.id\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Project Update Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/task/update\n                if (url.pathname === '/api/task/update' && request.method === 'POST') {\n                    try {\n                        const task = await request.json();\n                        await env.DB.prepare(`\n                            UPDATE tasks \n                            SET title = ?, description = ?, status = ?, required_date = ?, assigned_to = ?\n                            WHERE id = ?\n                        `).bind(\n                            task.title, task.description || null, task.status || 'pending', task.requiredDate || null, task.assignedTo || null, task.id\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Task Update Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/task/complete\n                if (url.pathname === '/api/task/complete' && request.method === 'POST') {\n                    try {\n                        const data = await request.json();\n                        await env.DB.prepare(`\n                            UPDATE tasks \n                            SET status = 'completed', completed_at = ?, completion_note = ?, completion_image = ?\n                            WHERE id = ?\n                        `).bind(\n                            new Date().toISOString(), data.note || null, data.image || null, data.taskId\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Task Complete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/invite\n                if (url.pathname === '/api/invite' && request.method === 'POST') {\n                    try {\n                        const data = await request.json();\n                        const { email, role, organizationId } = data;\n\n                        // Check if user exists\n                        const existingUser = await env.DB.prepare('SELECT * FROM users WHERE email = ?').bind(email).first();\n\n                        // Ideally send email here. For now, we simulate success or create a placeholder if needed.\n                        // In this app design, invites are links.\n\n                        return withCors(Response.json({ success: true, link: `https://buildpro.old-dream-22e5.workers.dev/login?orgId=${organizationId}&email=${email}&role=${role}` }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Invite Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/invoice\n                if (url.pathname === '/api/invoice' && request.method === 'POST') {\n                    try {\n                        const invoice = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO invoices (id, organization_id, type, amount, client_name, due_date, status, date, description, project_id)\n                            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            invoice.id, invoice.organizationId, invoice.type, invoice.amount, invoice.clientName || null, invoice.dueDate || null, invoice.status || 'pending', invoice.date || null, invoice.description || null, invoice.projectId || null\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Invoice Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/invoice\n                if (url.pathname === '/api/invoice' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        await env.DB.prepare('DELETE FROM invoices WHERE id = ?').bind(id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Invoice Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/meeting\n                if (url.pathname === '/api/meeting' && request.method === 'POST') {\n                    try {\n                        const meeting = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO meetings (id, organization_id, title, date, time, project_id, attendees, address)\n                            VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            meeting.id, meeting.organizationId, meeting.title, meeting.date, meeting.time, meeting.projectId || null, meeting.attendees ? JSON.stringify(meeting.attendees) : '[]', meeting.address || null\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Meeting Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/meeting\n                if (url.pathname === '/api/meeting' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        await env.DB.prepare('DELETE FROM meetings WHERE id = ?').bind(id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Meeting Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/project/update-post (Progress Notification)\n                if (url.pathname === '/api/project/update-post' && request.method === 'POST') {\n                    try {\n                        const update = await request.json();\n                        // Debug log\n                        console.log('Project Update Payload:', JSON.stringify(update));\n\n                        await env.DB.prepare(`\n                            INSERT INTO project_updates (id, project_id, message, date, author_name)\n                            VALUES (?, ?, ?, ?, ?)\n                        `).bind(\n                            update.id || null, update.projectId || null, update.message || null, update.date || null, update.authorName || 'Admin'\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Project Update Post Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // PUT /api/project/update\n                if (url.pathname === '/api/project/update' && request.method === 'PUT') {\n                    try {\n                        const { id, message } = await request.json();\n                        await env.DB.prepare('UPDATE project_updates SET message = ? WHERE id = ?').bind(message, id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Project Update Update Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/notification\n                if (url.pathname === '/api/notification' && request.method === 'POST') {\n                    try {\n                        const notification = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO notifications (id, organization_id, user_id, message, read, date, type, data)\n                            VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            notification.id, notification.organizationId, notification.userId, notification.message, notification.read ? 1 : 0, notification.date || null, notification.type || null, notification.data ? JSON.stringify(notification.data) : '{}'\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Notification Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/user/update\n                if (url.pathname === '/api/user/update' && request.method === 'POST') {\n                    try {\n                        const user = await request.json();\n                        await env.DB.prepare(`\n                            UPDATE users \n                            SET name = ?, email = ?, phone = ?, company = ?, role = ?\n                            WHERE id = ?\n                        `).bind(\n                            user.name, user.email, user.phone || null, user.company || null, user.role, user.id\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `User Update Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/reminder\n                if (url.pathname === '/api/reminder' && request.method === 'POST') {\n                    try {\n                        const reminder = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO reminders (id, organization_id, title, description, date, completed)\n                            VALUES (?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            reminder.id, reminder.organizationId, reminder.title, reminder.description || null, reminder.date || null, reminder.completed ? 1 : 0\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Reminder Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/reminder/update\n                if (url.pathname === '/api/reminder/update' && request.method === 'POST') {\n                    try {\n                        const reminder = await request.json();\n                        await env.DB.prepare(`\n                            UPDATE reminders \n                            SET completed = ?\n                            WHERE id = ?\n                        `).bind(\n                            reminder.completed ? 1 : 0, reminder.id\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Reminder Update Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/reminder\n                if (url.pathname === '/api/reminder' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        await env.DB.prepare('DELETE FROM reminders WHERE id = ?').bind(id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Reminder Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // POST /api/other-matter\n                if (url.pathname === '/api/other-matter' && request.method === 'POST') {\n                    try {\n                        const matter = await request.json();\n                        await env.DB.prepare(`\n                            INSERT INTO other_matters (id, organization_id, title, address, note, date)\n                            VALUES (?, ?, ?, ?, ?, ?)\n                        `).bind(\n                            matter.id, matter.organizationId, matter.title, matter.address || null, matter.note || null, matter.date || null\n                        ).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Other Matter Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/other-matter\n                if (url.pathname === '/api/other-matter' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        await env.DB.prepare('DELETE FROM other_matters WHERE id = ?').bind(id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Other Matter Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // PUT /api/other-matter\n                if (url.pathname === '/api/other-matter' && request.method === 'PUT') {\n                    try {\n                        const { id, title, address, note } = await request.json();\n                        await env.DB.prepare('UPDATE other_matters SET title = ?, address = ?, note = ? WHERE id = ?')\n                            .bind(title, address, note, id)\n                            .run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Other Matter Update Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/project\n                if (url.pathname === '/api/project' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        // Manual cascade delete\n                        await env.DB.batch([\n                            env.DB.prepare('DELETE FROM tasks WHERE project_id = ?').bind(id),\n                            env.DB.prepare('DELETE FROM project_updates WHERE project_id = ?').bind(id),\n                            env.DB.prepare('DELETE FROM invoices WHERE project_id = ?').bind(id),\n                            env.DB.prepare('DELETE FROM meetings WHERE project_id = ?').bind(id),\n                            env.DB.prepare('DELETE FROM projects WHERE id = ?').bind(id)\n                        ]);\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Destructive Project Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/task\n                if (url.pathname === '/api/task' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        await env.DB.prepare('DELETE FROM tasks WHERE id = ?').bind(id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Task Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // DELETE /api/project/update\n                if (url.pathname === '/api/project/update' && request.method === 'DELETE') {\n                    try {\n                        const { id } = await request.json();\n                        await env.DB.prepare('DELETE FROM project_updates WHERE id = ?').bind(id).run();\n                        return withCors(Response.json({ success: true }));\n                    } catch (e: any) {\n                        return withCors(Response.json({ message: `Project Update Delete Error: ${e.message}` }, { status: 500 }));\n                    }\n                }\n\n                // 404 for unknown API\n\n                return new Response('API Endpoint Not Found', { status: 404 });\n            }\n\n            // Emergency Debug Check\n            if (request.url.endsWith('/debug')) {\n                const dbStatus = env.DB ? 'Present' : 'Missing';\n                const assetsStatus = env.ASSETS ? 'Present' : 'Missing';\n\n                let dbCheck = 'Not attempted';\n                try {\n                    const { results } = await env.DB.prepare('SELECT * FROM users LIMIT 1').all();\n                    dbCheck = `Success (Found ${results.length} users). Sample: ${JSON.stringify(results[0] || {})}`;\n                } catch (e: any) {\n                    dbCheck = `Failed: ${e.message}`;\n                }\n\n                let assetCheck = 'Not attempted';\n                try {\n                    const assetReq = new Request(new URL('/index.html', request.url));\n                    const assetRes = await env.ASSETS.fetch(assetReq);\n                    assetCheck = `Success (${assetRes.status})`;\n                } catch (e: any) {\n                    assetCheck = `Failed: ${e.message}`;\n                }\n\n                return new Response(`Worker Status:\n- DB Binding: ${dbStatus}\n- DB Query: ${dbCheck}\n- ASSETS Binding: ${assetsStatus}\n- Index Asset Fetch: ${assetCheck}\n`);\n            }\n\n            // Asset Handling (Bypassing Router for performance and safety)\n            try {\n                // explicit SPA routing: if path is not API and not a file, serve index.html (via root / to avoid 307)\n                if (!url.pathname.startsWith('/api') && !url.pathname.includes('.')) {\n                    const indexRequest = new Request(new URL('/', request.url), request);\n                    return await env.ASSETS.fetch(indexRequest);\n                }\n\n                let response = await env.ASSETS.fetch(request);\n\n                if (response.status === 404 && !url.pathname.includes('.')) {\n                    const indexRequest = new Request(new URL('/', request.url), request);\n                    response = await env.ASSETS.fetch(indexRequest);\n                }\n                return response;\n            } catch (e: any) {\n                return new Response(`Worker Global Asset Error: ${e.message}\\n${e.stack}`, { status: 500 });\n            }\n\n        } catch (globalError: any) {\n            // This catches completely unexpected errors (like syntax errors at runtime, or weird env issues)\n            return new Response(`CRITICAL WORKER FAILURE: ${globalError.message}\\n${globalError.stack}`, { status: 500 });\n        }\n    }\n};\n"],
  "mappings": "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",
  "names": []
}
